<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Home - Classroom</title>
    <link rel="icon" href="https://raw.githubusercontent.com/three-1415/loader/main/favicon.png">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: "Segoe UI", sans-serif;
            background: #121929;
            color: #CFFFF8;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #searchBar {
            width: 60%;
            max-width: 500px;
            padding: 12px;
            font-size: 1rem;
            margin-top: 20px;
            margin-bottom: 20px;
            border: 2px solid #00ced1;
            border-radius: 6px;
            background: #121929;
            color: #CFFFF8;
            outline: none;
            box-shadow: 0 0 8px #00ffff80;
            transition: box-shadow 0.3s ease;
        }
        #searchBar:focus {
            box-shadow: 0 0 15px #00ffffcc;
        }

        .tab-container {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .tab-button {
            padding: 10px 20px;
            background: #121929;
            border: none;
            border-radius: 6px;
            color: #CFFFF8;
            cursor: pointer;
            box-shadow: 0 0 10px #00ffff80;
            transition: 0.3s;
        }
        .tab-button:hover {
            background: #002D41;
            box-shadow: 0 0 20px #00ffffcc;
        }
        .tab-button.active {
            background: #008b8b;
            box-shadow: 0 0 25px #00ffffcc;
        }

        .tab-content {
            display: none;
            width: 90%;
            max-width: 900px;
            margin-top: 20px;
            padding: 20px;
            background: #002D41;
            border-radius: 10px;
            box-shadow: 0 0 15px #00ffff40;
        }

        /* Launcher input */
        #url-input {
            width: 60%;
            max-width: 500px;
            padding: 12px;
            font-size: 1rem;
            margin-bottom: 20px;
            border: 2px solid #00ced1;
            border-radius: 6px;
            background: #121929;
            color: #CFFFF8;
            outline: none;
            box-shadow: 0 0 8px #00ffff80;
            transition: box-shadow 0.3s ease;
        }
        #url-input:focus {
            box-shadow: 0 0 15px #00ffffcc;
        }

        .cosmicphoton-button,
        .code-launcher-button {
            padding: 12px 28px;
            background: #121929;
            color: #CFFFF8;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0 0 10px #00ffff80;
            transition: background 0.3s ease, box-shadow 0.3s ease;
            margin: 8px;
        }
        .cosmicphoton-button:hover,
        .code-launcher-button:hover {
            background-color: #002D41;
            box-shadow: 0 0 20px #00ffffcc;
        }
    </style>
</head>

<body>

<button class="cosmicphoton-button" id="moreBtn">More!!!</button>

<h1>Hello World!</h1>
<h4>DM me: dasher1429</h4>

<div class="tab-container">
    <button class="tab-button active" onclick="openTab('launcher')">Launcher</button>
    <button class="tab-button" onclick="openTab('spaces')">Pr彡xys</button>
    <button class="tab-button" onclick="openTab('comments')">Chat</button>
</div>

<div id="launcher" class="tab-content" style="display:block;">
    <h3>Games</h3>
    <input type="text" id="searchBar" placeholder="Search games..." onkeyup="filterButtons()">
<button class="code-launcher-button" onclick="runCodeInPopup('https://raw.githubusercontent.com/three-1415/game/main/gn-math.html')">Launch Gn-Math</button>

<button class="code-launcher-button" onclick="runCodeInPopup('https://raw.githubusercontent.com/three-1415/loader/refs/heads/main/ugsfilesingle.html')">Launch Ultimate Game Stash</button>

<button class="code-launcher-button" onclick="runCodeInPopup('https://raw.githubusercontent.com/three-1415/gdl/main/index.html')">Launch Geometry Dash</button>

<button class="code-launcher-button" onclick="runCodeInPopup('https://raw.githubusercontent.com/three-1415/game/main/ovo.html')">Launch OvO</button>

<button class="code-launcher-button" onclick="runCodeInPopup('https://raw.githubusercontent.com/three-1415/game/main/ovo2.html')">Launch OvO 2</button>

<button class="code-launcher-button" onclick="runCodeInPopup('https://raw.githubusercontent.com/bingleton-ate-a-carrot-and-died/bingleton-ate-a-carrot-and-died.github.io@adc271dd82caef773ad36f0da45c09a27f4508b3/games/ovo3.html')">Launch OvO Dimensions</button>

<button class="code-launcher-button" onclick="runCodeInPopup('https://raw.githubusercontent.com/three-1415/game/main/eagler.html')">Launch Minecraft 1.12.2</button>

<button class="code-launcher-button" onclick="runCodeInPopup('https://raw.githubusercontent.com/three-1415/game/main/polytrack.html')">Launch PolyTrack</button>

<button class="code-launcher-button" onclick="runCodeInPopup('https://raw.githubusercontent.com/sc70049109-wq/GTA-VC/main/Grand%20Theft%20Auto_%20Vice%20City.html')">Launch Grand Theft Auto: Vice City</button>

<button class="code-launcher-button" onclick="runCodeInPopup('https://raw.githubusercontent.com/FritzCohen/Luminesence-Website/main/Luminesence%20Website/Games/singleHTMLGames/justgetoverit.html')">Launch Getting Over It (Scratch Edition)</button>

<button class="code-launcher-button" onclick="runCodeInPopup('https://raw.githubusercontent.com/CrimsonDeck/Geometry_Dash_v1.5_Griffpatch/main/index.html')">Launch Geometry Dash (Scratch)</button>

<button class="code-launcher-button" onclick="runCodeInPopup('https://raw.githubusercontent.com/three-1415/game/main/totm.html')">Launch Tomb of the Mask</button>
</div>

<div id="spaces" class="tab-content">
    <h3>Pr彡xys</h3>
    <button class="cosmicphoton-button" onclick="openIframe('https://classroom.canalspa.cl')">Open Velara</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://hi.infotechnology.com')">Open Truffled</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://hi.ryuflowing.org')">Open Truffled #2</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://d58o0iyi.beanweb.qzz.io.cdn.cloudflare.net')">Open Overcloaked</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://lightpoems.hotelconsuladoinn.com')">Open Shadow</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://academiq.academy.cdn.cloudflare.net')">Open Boredom V2</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://d18xcs94twaq85.cloudfront.net')">Open Ghost</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://deyxo1ks57d67.cloudfront.net')">Open Ghost #2</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://dpb7lli3zpdp0.cloudfront.net')">Open Ghost #3</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://https://d2kn5mrsmcpg5.cloudfront.net')">Open Ghost #4</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://d39rlyntlv9ls.cloudfront.net')">Open Ghost #5</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://d3bgypqca3lh3w.cloudfront.net')">Open Ghost #6</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://d1deklo9bqwg9t.cloudfront.net')">Open Ghost #7</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://d2zhqf8vp4pw68.cloudfront.net')">Open Ghost #8</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://ddtqujyx7b03k.cloudfront.net')">Open Ghost #9</button>
    <button class="cosmicphoton-button" onclick="openIframe('https://d1rxcmewslna2u.cloudfront.net')">Open Ghost #10</button>
</div>

<div id="comments" class="tab-content">
    <h3>Chat</h3>
    <button class="cosmicphoton-button" onclick="openIframe('https://padlet.com/embed/eaip9uzs4afiqnfb')">Open Chat</button>
</div>

<script>
const BASE_TITLE = document.title;
const BASE_FAVICON = "https://raw.githubusercontent.com/three-1415/loader/main/favicon.png";

const RESET_SNIPPET = `
<button id="resetTabBtn"
    style="
position: fixed;
bottom: 10px;
right: 10px;
padding: 6px 12px;
font-size: 0.75rem;
background: #121929;
color: #CFFFF8;
border: 1px solid #00ced1;
border-radius: 6px;
cursor: pointer;
box-shadow: 0 0 8px #00ffff80;
z-index: 99999;
    ">
    Reset Tab
</button>
<script>
function resetTab() {
    document.title = "Home - Classroom";
    document.querySelectorAll("link[rel='icon'], link[rel='shortcut icon']").forEach(e => e.remove());
    const icon = document.createElement("link");
    icon.rel = "icon";
    icon.href = "${BASE_FAVICON}";
    document.head.appendChild(icon);
}
document.getElementById("resetTabBtn").onclick = resetTab;
<\/script>
`;

document.getElementById("moreBtn").onclick = function () {
    const videoURL = "https://raw.githubusercontent.com/user5095/rickroll-free-video/main/rickroll.mp4";
    const win = window.open("about:blank", "_blank");

    const html = `
        <html>
        <head>
            <title>${BASE_TITLE}</title>
            <link rel="icon" href="${BASE_FAVICON}">
        </head>
        <body style="margin:0; background:black; height:100vh; display:flex; justify-content:center; align-items:center; cursor:pointer;">
            <div id="msg" style="color:white; font-family:sans-serif; opacity:0.6;">Click anywhere to play</div>

            ${RESET_SNIPPET}

            <script>
                let loaded = false;
                document.body.onclick = () => {
                    if (loaded) return;
                    loaded = true;
                    document.getElementById("msg").remove();

                    const vid = document.createElement("video");
                    vid.src = "${videoURL}";
                    vid.autoplay = true;
                    vid.controls = true;
                    vid.playsInline = true;
                    vid.style.width = "100%";
                    vid.muted = false;

                    document.body.appendChild(vid);
                    vid.play();
                };
            <\/script>
        </body>
        </html>
    `;

    win.document.write(html);
    win.document.close();
};

function filterButtons() {
    const query = document.getElementById("searchBar").value.toLowerCase();
    document.querySelectorAll(".code-launcher-button").forEach(btn => {
        btn.style.display = btn.textContent.toLowerCase().includes(query) ? "inline-block" : "none";
    });
}

function openTab(tabName) {
    document.querySelectorAll('.tab-content').forEach(div => div.style.display = 'none');
    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
    document.getElementById(tabName).style.display = 'block';
    event.target.classList.add('active');
}

async function runCodeInPopup(url) {
    try {
        const response = await fetch(url);
        const html = await response.text();

        const win = window.open('about:blank', '_blank');
        win.document.open();
        win.document.write(html + RESET_SNIPPET);
        win.document.close();

        function applyBranding() {
            if (win.closed) return;
            win.document.title = BASE_TITLE;

            let head = win.document.head;
            if (!head) {
                head = win.document.createElement("head");
                win.document.documentElement.prepend(head);
            }

            win.document.querySelectorAll("link[rel='icon'], link[rel='shortcut icon']").forEach(e => e.remove());

            const link = win.document.createElement("link");
            link.rel = "icon";
            link.href = BASE_FAVICON;
            head.appendChild(link);
        }

        applyBranding();
        setTimeout(applyBranding, 100);
        setTimeout(applyBranding, 500);

    } catch (err) {
        alert("Failed to load HTML: " + err.message);
    }
}

function openIframe(link) {
    const win = window.open('about:blank', '_blank');
    if (!win) {
        alert("Popup blocked");
        return;
    }

    win.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
            <title>${BASE_TITLE}</title>
            <link rel="icon" href="${BASE_FAVICON}">
            <style>
                body { margin:0; height:100vh; display:flex; }
                iframe { border:none; width:100%; height:100%; }
            </style>
        </head>
        <body>
            <div id="loader" style="margin:auto; font-family:sans-serif; opacity:0.6;">
                Loading…
            </div>

            ${RESET_SNIPPET}

        </body>
        </html>
    `);

    win.document.close();

    setTimeout(() => {
        if (win.closed) return;

        const iframe = win.document.createElement("iframe");
        iframe.src = link;

        const loader = win.document.getElementById("loader");
        if (loader) loader.remove();

        win.document.body.appendChild(iframe);
    }, 50);

    function forceFavicon() {
        if (win.closed) return;

        let head = win.document.head;
        if (!head) return;

        win.document.querySelectorAll("link[rel='icon'], link[rel='shortcut icon']").forEach(e => e.remove());

        const linkEl = win.document.createElement("link");
        linkEl.rel = "icon";
        linkEl.href = BASE_FAVICON;
        head.appendChild(linkEl);

        win.document.title = BASE_TITLE;
    }

    setTimeout(forceFavicon, 50);
    setTimeout(forceFavicon, 200);
    setTimeout(forceFavicon, 1000);
}
</script>

<script>
setTimeout(() => {
    const link = document.createElement("link");
    link.rel = "icon";
    link.type = "image/png";
    link.href = "https://raw.githubusercontent.com/three-1415/loader/main/favicon.png"; 
    document.head.appendChild(link);
}, 100);
</script>

</body>
</html>
